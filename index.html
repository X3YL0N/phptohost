<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CyberVault ‚Äì Secure Image Uploader</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
    body {
        margin: 0;
        padding: 0;
        background: black;
        font-family: Poppins, sans-serif;
        color: #00ffea;
        overflow-x: hidden;
    }
    #matrix, #particles-js {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
    }
    .container {
        position: relative;
        z-index: 5;
        max-width: 600px;
        margin: 80px auto;
        padding: 20px;
        background: rgba(20, 20, 20, 0.6);
        border: 1px solid #00ffc8;
        border-radius: 12px;
        box-shadow: 0 0 20px #00ffc8;
        backdrop-filter: blur(5px);
    }
    h2 {
        text-align: center;
        color: #00ffea;
        text-shadow: 0 0 10px #00ffc8;
    }
    #drop-area {
        border: 2px dashed #00ffc8;
        padding: 20px;
        margin-top: 15px;
        text-align: center;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.3s;
    }
    #drop-area:hover {
        background: rgba(0, 255, 200, 0.1);
    }
    #drop-area.dragover {
        background: rgba(0, 255, 200, 0.2);
        border-color: white;
    }
    .hidden {
        display: none;
    }
    .progress-box {
        margin-top: 20px;
        background: #111;
        padding: 15px;
        border-radius: 10px;
    }
    .progress-line {
        height: 10px;
        background: #333;
        border-radius: 5px;
        overflow: hidden;
    }
    .progress-bar {
        height: 10px;
        width: 0%;
        background: #00ffc8;
    }
    .gallery {
        margin-top: 25px;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 10px;
    }
    .image-card {
        background: #111;
        border: 1px solid #00ffc8;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 0 10px #00ffc8;
    }
    .image-card img {
        width: 100%;
        height: 120px;
        object-fit: cover;
    }
    .notification {
        position: fixed;
        top: 20px;
        right: -300px;
        background: #111;
        color: #00ffd5;
        padding: 12px 18px;
        border-radius: 8px;
        border: 1px solid #00ffea;
        box-shadow: 0 0 15px #00ffe6;
        transition: 0.5s;
        z-index: 99;
    }
    .notification.show {
        right: 20px;
    }
</style>
</head>

<body>

<div id="matrix"></div>
<div id="particles-js"></div>

<div class="notification" id="notification">
    <span id="notification-message">Notification</span>
</div>

<div class="container">
    <h2>‚ö° CyberVault Secure Upload</h2>

    <div id="drop-area">
        <i class="fas fa-cloud-arrow-up" style="font-size: 45px; margin-bottom: 10px;"></i>
        <p>Drop Image or Click to Upload</p>
        <input type="file" id="fileInput" class="hidden">
    </div>

    <div id="upload-progress" class="progress-box hidden">
        <p id="progress-status">ENCRYPTING...</p>
        <div class="progress-line">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
        <p id="progress-text">0%</p>
    </div>

    <div id="upload-result" class="hidden">
        <p><b>Direct Link</b></p>
        <input id="direct-link" style="width:100%">

        <p><b>HTML Code</b></p>
        <input id="html-code" style="width:100%">

        <p><b>Markdown Code</b></p>
        <input id="markdown-code" style="width:100%">
    </div>

    <h3 style="margin-top:30px;">üìÅ Uploaded Gallery</h3>
    <div id="empty-gallery" style="text-align:center;color:#777;">No images uploaded yet.</div>
    <div id="gallery" class="gallery hidden"></div>

</div>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

<script>

const imgbbApiKey = "7c140e12554dd2ebe7650e53ac6b8c99";

let gallery = document.getElementById("gallery");
let emptyGallery = document.getElementById("empty-gallery");

function showNotification(msg) {
    const n = document.getElementById("notification");
    document.getElementById("notification-message").textContent = msg;
    n.classList.add("show");
    setTimeout(() => n.classList.remove("show"), 4200);
}

document.getElementById("drop-area").onclick = () => {
    document.getElementById("fileInput").click();
};
document.getElementById("fileInput").onchange = (e) => {
    uploadFile(e.target.files[0]);
};

async function uploadFile(file) {
    document.getElementById("upload-progress").classList.remove("hidden");

    const formData = new FormData();
    formData.append("image", file);
    formData.append("key", imgbbApiKey);

    let percent = 0;
    let bar = document.getElementById("progress-bar");
    let text = document.getElementById("progress-text");

    let loading = setInterval(() => {
        percent += 5;
        if (percent > 90) percent = 90;
        bar.style.width = percent + "%";
        text.textContent = percent + "%";
    }, 150);

    try {
        const res = await fetch("https://api.imgbb.com/1/upload", {
            method: "POST",
            body: formData
        });

        const data = await res.json();
        clearInterval(loading);

        if (!data.success) throw new Error("Upload failed!");

        bar.style.width = "100%";
        text.textContent = "100%";

        processUpload(data.data);

    } catch (err) {
        showNotification("‚ùå Upload failed. Try again.");
        clearInterval(loading);
    }
}

function processUpload(data) {
    document.getElementById("upload-result").classList.remove("hidden");

    document.getElementById("direct-link").value = data.url;
    document.getElementById("html-code").value = `<img src="${data.url}">`;
    document.getElementById("markdown-code").value = `![image](${data.url})`;

    addToGallery(data.url);
    emptyGallery.classList.add("hidden");
    gallery.classList.remove("hidden");

    showNotification("‚úî Upload Successful!");
}

function addToGallery(url) {
    let div = document.createElement("div");
    div.className = "image-card";
    div.innerHTML = `<img src="${url}">`;
    gallery.prepend(div);
}

// MATRIX EFFECT
const matrix = document.getElementById("matrix");
const ctx = document.createElement("canvas").getContext("2d");
matrix.appendChild(ctx.canvas);
ctx.canvas.width = window.innerWidth;
ctx.canvas.height = window.innerHeight;

const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
const fontSize = 14;
const columns = Math.floor(ctx.canvas.width / fontSize);
let drops = Array(columns).fill(1);

function drawMatrix() {
    ctx.fillStyle = "rgba(0,0,0,0.05)";
    ctx.fillRect(0,0,ctx.canvas.width,ctx.canvas.height);
    ctx.fillStyle = "#00ffea";
    ctx.font = fontSize + "px monospace";

    drops.forEach((y, i) => {
        const text = chars[Math.floor(Math.random() * chars.length)];
        ctx.fillText(text, i * fontSize, y * fontSize);
        drops[i] = y * fontSize > ctx.canvas.height && Math.random() > 0.975 ? 0 : y + 1;
    });
}
setInterval(drawMatrix, 50);

// PARTICLES JS
particlesJS("particles-js", {
    "particles": {"number":{"value":80},"color":{"value":"#00ffc8"}},
    "interactivity": {"events":{"onhover":{"enable":true}}}
});

</script>

</body>
</html>
